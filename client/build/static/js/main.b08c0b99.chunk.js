(this.webpackJsonppeluqueria=this.webpackJsonppeluqueria||[]).push([[0],{216:function(e,t,n){},420:function(e,t,n){"use strict";n.r(t);var r={};n.r(r),n.d(r,"contactMe",(function(){return H})),n.d(r,"sendMessage",(function(){return R})),n.d(r,"compararFecha",(function(){return A})),n.d(r,"getUser",(function(){return M})),n.d(r,"getFreeHours",(function(){return L})),n.d(r,"getHoursToday",(function(){return T})),n.d(r,"saveWspMessage",(function(){return _})),n.d(r,"getWspMessage",(function(){return B})),n.d(r,"getPrice",(function(){return I})),n.d(r,"editWspMessage",(function(){return U})),n.d(r,"saveInfo",(function(){return W}));n(247),n(267),n(283),n(285);var c=n(0),a=n.n(c),o=n(13),i=n.n(o),s=n(20),l=n(8),u=n(460),d=n(455),j=n(12),b=n.n(j),h=n(56),O=n(458),p=n.p+"static/media/wsp.1ee748db.png",m=n(464),f=n(459),x=n(462),g=n(463),v=n(32),C=n(29),y="GET_FREE_HOURS",S="GET_HOURS_TOODAY",N="GET_WSP_MSG",w="EDIT_WSP_MESSAGE",E="FIND_USER",F="HANDLE_CHANGE",k="GET_PRICE",A=function(e,t){return function(){if(e&&t)return D(e)<=D(t)}},D=function(e){var t=e.split("-")[0],n=e.split("-")[1]-1,r=e.split("-")[2];return r<2e3&&(r="20"+r),new Date(r,n,t)},P=3492322020,H=function(e,t,n){return function(){t||e?window.open("https://wa.me/549".concat(e,"?text=").concat(t||""),"_blank"):n?window.open("https://wa.me/".concat(P,"?text=Hola Ariel! Soy ").concat(n,", me estoy contactando desde tu sitio web"),"_blank"):window.open("https://wa.me/".concat(P,"?text=Hola Ariel! Me contacto desde tu sitio web"),"_blank")}},R=function(e,t,n){return function(){var r=e.replace("HORA","*".concat(n," hs*"));window.open("https://wa.me/549".concat(t,"?text=").concat(r),"_blank")}},M=function(e){return function(t){b.a.get("/usuario/".concat(e)).then((function(e){var n=e.data.sort((function(e,t){return D(e.dia)>D(t.dia)?-1:1}));t(W(E,n[0]))})).catch((function(){return console.log("error al conectar con el server")}))}},L=function(e){return function(t){b.a.get("/hoursFree/".concat(e)).then((function(e){return t(W(y,e.data))})).catch((function(){return console.log("error al conectar con el server")}))}},T=function(e){return function(t){b.a.get("/hoursFree/".concat(e)).then((function(e){return t(W(S,e.data))})).catch((function(){return console.log("error al conectar con el server")}))}},_=function(e){return function(){b.a.post("/setearMensaje",{mensaje:e})}},B=function(){return function(e){b.a.get("/mensajeWsp").then((function(t){return e(W(N,t.data.mensaje))})).catch((function(){return console.log("error al conectar con el server")}))}},I=function(){return function(e){b.a.get("/precio").then((function(t){return e(W(k,t.data.precio))})).catch((function(){return console.log("error al conectar con el server")}))}},U=function(e){return function(t){t(W(w,e))}},W=function(e,t){return{type:e,payload:t}},q=n(1),G=function(){return Object(q.jsx)("div",{className:"espera",children:Object(q.jsx)("div",{className:"d-flex justify-content-center loading",children:Object(q.jsx)("div",{className:"spinner-border",role:"status",children:Object(q.jsx)("span",{className:"visually-hidden",children:"Loading..."})})})})},z=n(219),$=n.n(z),J=Object(d.a)({inputFecha:{display:"flex",justifyContent:"center",backgroundColor:"white",height:"50px",overflow:"hidden"}}),Q=new Date((new Date).getFullYear(),(new Date).getMonth(),(new Date).getDate());var V=Object(v.b)((function(e){return{freeHours:e.freeHours,wspMessage:e.wspMessage}}),(function(e){return Object(C.b)(r,e)}))((function(e){var t=(new Date).toLocaleString("es-AR",{dateStyle:"short"}).replaceAll("/","-"),n=Object(c.useState)(t.split("-")[0]+"-"+t.split("-")[1]+"-20"+t.split("-")[2]),r=Object(l.a)(n,2),a=r[0],o=r[1],i=Object(c.useState)(new Date),s=Object(l.a)(i,2),d=s[0],j=s[1],v=Object(c.useState)([]),C=Object(l.a)(v,2),y=C[0],S=C[1],N=Object(c.useState)(!1),w=Object(l.a)(N,2),E=w[0],F=w[1],k=Object(c.useState)(!1),A=Object(l.a)(k,2),D=A[0],P=A[1],H=Object(c.useState)(!1),R=Object(l.a)(H,2),M=R[0],L=R[1],T=Object(c.useState)(),_=Object(l.a)(T,2),B=_[0],I=_[1],U=Object(c.useState)(!1),W=Object(l.a)(U,2),z=W[0],V=W[1],K=Object(c.useState)(),Y=Object(l.a)(K,2),Z=Y[0],X=Y[1],ee=Object(c.useState)(!0),te=Object(l.a)(ee,2),ne=te[0],re=te[1],ce=Object(c.useState)(!1),ae=Object(l.a)(ce,2),oe=ae[0],ie=ae[1],se=Object(c.useState)(!1),le=Object(l.a)(se,2),ue=le[0],de=le[1],je=Object(c.useState)(!1),be=Object(l.a)(je,2),he=be[0],Oe=be[1],pe=Object(c.useState)({}),me=Object(l.a)(pe,2),fe=me[0],xe=me[1],ge=Object(c.useState)(0),ve=Object(l.a)(ge,2),Ce=ve[0],ye=ve[1],Se=Object(c.useState)(""),Ne=Object(l.a)(Se,2),we=Ne[0],Ee=Ne[1],Fe=function(){return V(!1)},ke=function(){return P(!1)},Ae=function(){return L(!1)},De=J(),Pe=Object(h.b)().enqueueSnackbar,He=function(e){Pe(e,{anchorOrigin:{vertical:"top",horizontal:"left"},TransitionComponent:O.a,variant:"info"})};Object(c.useEffect)((function(){b.a.get("/getClients/".concat(a)).then((function(e){return S(e.data)})),e.getWspMessage(),b.a.get("/precio").then((function(e){return X(e.data.precio)})),b.a.get("/cantUsers").then((function(e){return ye(e.data)})),b.a.get("/qr").then((function(e){return Ee(e.data)}))}),[E,a]);var Re=function(e,t){var n=e.split("-");if(!t)return new Date("20"+n[2],n[1]-1,n[0]);var r=t.split(":");return new Date("20"+n[2],n[1]-1,n[0],r[0],r[1])};return y.length>0?Object(q.jsxs)("div",{children:[Object(q.jsxs)("div",{className:"contenedorFormulario",children:[Object(q.jsxs)("div",{className:"cabecera",children:[Object(q.jsx)("h3",{children:"Administraci\xf3n"})," ",Object(q.jsx)("h4",{children:a})]}),Object(q.jsxs)("form",{className:"formularioReservas",children:[Object(q.jsxs)("div",{className:"botonesFiltrado",children:[Object(q.jsx)(m.a,{variant:"primary",onClick:function(){return V(!0)},children:"Opciones"}),Object(q.jsx)(m.a,{variant:"info",onClick:function(){L(!0)},children:"Tomarse el d\xeda"})]}),Object(q.jsx)("div",{className:"filaFormulario",children:Object(q.jsxs)(f.a,{responsive:"sm",children:[Object(q.jsx)("thead",{children:Object(q.jsxs)("tr",{children:[Object(q.jsx)("th",{children:"Nombre"}),Object(q.jsx)("th",{children:"Fecha/Turno"}),Object(q.jsx)("th",{children:"Escribir"}),Object(q.jsx)("th",{children:"Admin"})]})}),Object(q.jsx)("tbody",{children:y.map((function(t){return t.ocupado?"Cliente"===t.ocupado?Object(q.jsxs)("tr",{className:t.tienePromo?"promo":"cliente",children:[Object(q.jsx)("td",{onClick:function(){return e.contactMe(t.telefono)},children:Object(q.jsx)("b",{children:t.nombre})}),Object(q.jsxs)("td",{children:[(n=t.dia,Re(n).getTime()===Q.getTime()?"Hoy":n)," ",t.turno," hs"]}),Object(q.jsx)("td",{children:Object(q.jsx)("img",{name:t.telefono,onClick:function(){return e.wspMessage?function(e,t,n,r,c){xe({mensaje:e,tel:t,turno:n,dia:r,nombre:c}),de(!0)}(e.wspMessage,t.telefono,t.turno,t.dia,t.nombre):He("Debes setear un mensaje antes de enviar algo")},className:"imagenWsp",src:p,alt:"boton de whatsapp"})}),Object(q.jsxs)("td",{children:[t.tienePromo&&Object(q.jsx)("button",{name:t.id,onClick:function(e){e.preventDefault(),I(t.id),Oe(!0)},children:"Castigar"}),Object(q.jsx)("button",{name:t.id,onClick:function(e){e.preventDefault(),I(t.id),P(!0)},children:"Eliminar"})]})]}):Object(q.jsxs)("tr",{className:"ocupado",children:[Object(q.jsx)("td",{children:"Ocupado"}),Object(q.jsxs)("td",{children:[t.turno,"hs"]}),Object(q.jsx)("td",{}),Object(q.jsx)("td",{children:Object(q.jsx)("button",{onClick:function(e){return function(e,t){e.preventDefault(),b.a.post("/liberarHorario/".concat(a,"/").concat(t)).then((function(e){He(e.data.msg),F(!E)})).catch((function(){He("Hubo un error")}))}(e,t.turno)},children:"Liberar"})})]}):Object(q.jsxs)("tr",{children:[Object(q.jsx)("td",{children:"Libre"}),Object(q.jsxs)("td",{children:[t," hs"]}),Object(q.jsx)("td",{}),Object(q.jsx)("td",{children:Object(q.jsx)("button",{name:t,onClick:function(e){return function(e,t){e.preventDefault(),b.a.post("/ocuparHorario/".concat(a,"/").concat(t)).then((function(e){He(e.data.msg),F(!E)})).catch((function(){He("Hubo un error")}))}(e,t)},children:"Ocupar"})})]});var n}))})]})}),Object(q.jsx)("div",{className:"filaFormulario"})]})]}),Object(q.jsxs)(x.a,{show:D,onHide:ke,children:[Object(q.jsx)(x.a.Header,{closeButton:!0,children:Object(q.jsx)(x.a.Title,{children:"Advertencia!"})}),Object(q.jsx)(x.a.Body,{children:"Est\xe1 seguro que quieres borrar este cliente?"}),Object(q.jsxs)(x.a.Footer,{children:[Object(q.jsx)(m.a,{variant:"secondary",onClick:ke,children:"No"}),Object(q.jsx)(m.a,{variant:"danger",onClick:function(){var e;ke(),e=B,b.a.post("/deleteClient/".concat(e)).then((function(e){He(e.data.msg),F(!E)})).catch((function(){He("Hubo un error")}))},children:"Si"})]})]}),Object(q.jsxs)(x.a,{show:he,onHide:function(){return Oe(!1)},children:[Object(q.jsx)(x.a.Header,{closeButton:!0,children:Object(q.jsx)(x.a.Title,{children:"Advertencia!"})}),Object(q.jsx)(x.a.Body,{children:"Est\xe1 seguro que quieres castigar este cliente?"}),Object(q.jsxs)(x.a.Footer,{children:[Object(q.jsx)(m.a,{variant:"secondary",onClick:function(){return Oe(!1)},children:"No"}),Object(q.jsx)(m.a,{variant:"danger",onClick:function(){var e;Oe(!1),e=B,b.a.put("/quitarPromo/".concat(e)).then((function(e){He(e.data.msg),F(!E)})).catch((function(){He("Hubo un error")}))},children:"Si"})]})]}),Object(q.jsxs)(x.a,{show:ue,onHide:function(){return de(!1)},children:[Object(q.jsx)(x.a.Header,{closeButton:!0,children:Object(q.jsx)(x.a.Title,{children:"Mensaje de WhatsApp"})}),Object(q.jsx)(x.a.Body,{children:Object(q.jsxs)("div",{className:"container row",children:[Object(q.jsxs)("div",{className:"col",onClick:function(){return e.sendMessage(fe.mensaje,fe.tel,fe.turno)},children:[Object(q.jsx)("h2",{children:"Recordatorio"}),Object(q.jsx)("img",{className:"imagenWsp",src:p,alt:"boton de whatsapp"})]}),Object(q.jsxs)("div",{className:"col",onClick:function(){return e.sendMessage((t=fe.dia,n=fe.turno,r=fe.nombre,"*ARIEL LUQUE PELUQUERIA DE CABALLEROS* Agradece tu reserva el d\xeda ".concat(t," a las ").concat(n," Hs. Te espero ").concat(r,".")),fe.tel,fe.turno);var t,n,r},children:[Object(q.jsx)("h2",{children:"Primer aviso"}),Object(q.jsx)("img",{className:"imagenWsp",src:p,alt:"boton de whatsapp"})]})]})})]}),Object(q.jsxs)(x.a,{show:M,onHide:Ae,children:[Object(q.jsx)(x.a.Header,{closeButton:!0,children:Object(q.jsx)(x.a.Title,{children:"Advertencia!"})}),Object(q.jsx)(x.a.Body,{children:"Est\xe1 seguro que quieres tomarte este d\xeda?"}),Object(q.jsxs)(x.a.Footer,{children:[Object(q.jsx)(m.a,{variant:"secondary",onClick:Ae,children:"No"}),Object(q.jsx)(m.a,{variant:"danger",onClick:function(){b.a.get("/hoursFree/".concat(a)).then((function(e){e.data.forEach((function(e){b.a.post("/ocuparHorario/".concat(a,"/").concat(e))}))})).then((function(){F(!E),He("Dia ocupado")})),Ae()},children:"Si"})]})]}),Object(q.jsxs)(g.a,{show:z,onHide:Fe,children:[Object(q.jsx)(g.a.Header,{closeButton:!0,children:Object(q.jsx)(g.a.Title,{children:"Opciones"})}),Object(q.jsxs)(g.a.Body,{children:[Object(q.jsx)("span",{children:"Filtrar por d\xeda"}),Object(q.jsx)(u.a,{onClick:function(){return ie(!0)},onClose:function(){return ie(!1)},open:oe,InputProps:{readOnly:!0},name:"dia",autoOk:!0,className:De.inputFecha,format:"dd/MM/yyyy",value:d,InputAdornmentProps:{position:"start"},onChange:function(e){var t=new Date(e.toString().slice(4,15)).toLocaleString("es-AR",{dateStyle:"short"}).replaceAll("/","-");return t=t.split("-")[0]+"-"+t.split("-")[1]+"-20"+t.split("-")[2],j(e),Fe(),o(t)}}),Object(q.jsxs)("div",{className:"botonesFiltrado",children:[ne?Object(q.jsx)(m.a,{onClick:function(){b.a.get("/allClients").then((function(e){var t=e.data.filter((function(e){return Re(e.dia)>=new Date((new Date).getFullYear(),(new Date).getMonth(),(new Date).getDate())}));t=t.sort((function(e,t){return Re(e.dia,e.turno)-Re(t.dia,t.turno)})),S(t.reverse())})),re(!ne)},children:"Mostrar Todos"}):Object(q.jsx)(m.a,{onClick:function(){F(!E),re(!ne)},children:"Reset"}),Object(q.jsx)(m.a,{onClick:function(){return e.history.push("/search")},children:" Buscar Cliente"})]}),Object(q.jsx)("hr",{}),Object(q.jsx)("textarea",{value:e.wspMessage,name:"mensajewsp",className:"mensajeWsp",onChange:function(t){return e.editWspMessage(t.target.value)}}),Object(q.jsx)("div",{className:"botonesFiltrado",children:Object(q.jsx)(m.a,{onClick:function(){e.saveWspMessage(e.wspMessage),Fe()},children:"Setear Mensaje"})}),Object(q.jsx)("hr",{}),Object(q.jsxs)("div",{className:"setearPrecio",children:[Object(q.jsx)("input",{type:"number",value:Z,name:"precio",className:"precio",onChange:function(e){return X(e.target.value)}}),Object(q.jsx)("div",{className:"botonesFiltrado",children:Object(q.jsx)(m.a,{onClick:function(){b.a.post("/setearPrecio",{precio:Z}).then((function(e){return He(e.data.msg)})),Fe()},children:"Setear Precio"})})]}),Object(q.jsx)("hr",{}),Object(q.jsx)(m.a,{onClick:function(){return e.history.push("/promotions")},children:"Promociones"}),Object(q.jsx)("hr",{}),Object(q.jsx)(m.a,{onClick:function(){return e.history.push("/statistics")},children:"Estadisticas"}),Object(q.jsx)("hr",{}),""===we?Object(q.jsx)("p",{children:"Generando C\xf3digo"}):Object(q.jsx)($.a,{style:{height:"auto",maxWidth:"100%",width:"100%"},value:we,viewBox:"0 0 256 256"}),Object(q.jsx)("hr",{}),Object(q.jsxs)("p",{children:["Cantidad de clientes: ",Ce]})]})]})]}):Object(q.jsx)(G,{})})),K=n(3),Y=Object(v.b)(null,(function(e){return Object(C.b)(r,e)}))((function(e){var t=e.value,n=e.onClick,r=e.onChange,c=e.className,a=Object(h.b)().enqueueSnackbar;return Object(q.jsxs)("div",{className:"filaFormulario ".concat(c),children:[Object(q.jsx)("input",{name:"id",value:t,onChange:r,type:"dni",placeholder:"Ingrese su DNI"}),Object(q.jsx)("button",{className:"boton",onClick:function(e){var r;e.preventDefault(),r=t,new RegExp(/^[0-9]{8}$/).test(r)?n():a("Revisa tu DNI",{anchorOrigin:{vertical:"top",horizontal:"left"},TransitionComponent:O.a,variant:"error"})},children:"Siguiente"})]})})),Z=function(e){var t=e.compararFecha,n=e.diaActual,r=e.diaPromo,c=e.precio;return Object(q.jsx)("div",{className:"filaFormulario",children:t(n,r)?Object(q.jsxs)("p",{className:"havePromo",children:["Usted tiene una promoci\xf3n v\xe1lida hasta el ",r," con un coste de $300"]}):Object(q.jsxs)(q.Fragment,{children:[Object(q.jsxs)("p",{className:"doesntHavePromo",children:["Si elije esta fecha el corte te costar\xe1 ",c]}),Object(q.jsxs)("p",{className:"doesntHavePromo",children:["Para mantener la promo elige una fecha anterior al ",r]})]})})},X=function(e){var t=e.fecha,n=e.nombre,r=e.hora;return Object(q.jsxs)("div",{className:"booked",children:[Object(q.jsx)("p",{children:"Hola ".concat(n,"! Tienes registrado un turno a la peluquer\xeda el d\xeda ").concat(t," a las ").concat(r,".")}),Object(q.jsx)("p",{children:"Hasta entonces no podr\xe1s sacar otro turno"})]})},ee=function(e){var t=e.precio,n=e.className;return Object(q.jsx)("div",{className:n,children:Object(q.jsx)("marquee",{children:Object(q.jsxs)("h2",{children:["Nuestro precio actual es $",t," | Los mensajes de whatsapp est\xe1n deshabilitados temporalmente"]})})})},te=Object(d.a)({inputFecha:{display:"flex",justifyContent:"center",backgroundColor:"white",height:"50px",overflow:"hidden"}});var ne=Object(v.b)((function(e){return{freeHours:e.freeHours,user:e.user,price:e.price}}),(function(e){return Object(C.b)(r,e)}))((function(e){var t=(new Date).toLocaleString("es-AR",{dateStyle:"short"}).replaceAll("/","-");t=t.split("-")[0]+"-"+t.split("-")[1]+"-20"+t.split("-")[2];var n=new Date,r=Object(c.useState)(n),a=Object(l.a)(r,2),o=a[0],i=a[1],s=Object(c.useState)(!1),d=Object(l.a)(s,2),j=d[0],f=d[1],g=Object(c.useState)(!1),v=Object(l.a)(g,2),C=v[0],y=v[1],S=Object(c.useState)(!1),N=Object(l.a)(S,2),w=N[0],E=N[1],F=Object(c.useState)(!1),k=Object(l.a)(F,2),A=k[0],D=k[1],P=Object(c.useState)(!1),H=Object(l.a)(P,2),R=H[0],M=H[1],L=Object(c.useState)(!1),T=Object(l.a)(L,2),_=T[0],B=T[1],I=te(),U=Object(h.b)().enqueueSnackbar,W=function(e){e||(e="Parece que ese turno est\xe1 ocupado"),U(e,{anchorOrigin:{vertical:"top",horizontal:"left"},TransitionComponent:O.a,variant:"error"})};Object(c.useEffect)((function(){e.user.dia===t?e.getHoursToday(e.user.dia):e.getFreeHours(e.user.dia),e.getPrice(),0===o.getDay()?y(!0):y(!1)}),[o,e.user]);var z=function(t){"telefono"!==t.target.name&&"nombre"!==t.target.name||B(!0),e.saveInfo("HANDLE_CHANGE",{nombre:t.target.name,data:t.target.value})},$=function(){var t=e.compararFecha(e.user.dia,e.user.diaPromo),n=Object(K.a)(Object(K.a)({},e.user),{},{tienePromo:t,dia:e.user.dia.split("-")[0]+"-"+e.user.dia.split("-")[1]+"-"+Number(e.user.dia.split("-")[2]-2e3)});b.a.post("/newClient",n).then((function(){return f(!0),void M(!0)})).catch((function(){return W()}))};return Object(q.jsxs)(q.Fragment,{children:[0!==e.freeHours.length?Object(q.jsxs)(q.Fragment,{children:[Object(q.jsxs)("div",{className:"contenedorFormulario",children:[Object(q.jsx)("center",{children:Object(q.jsx)("h3",{children:"Haz tu reserva!"})}),Object(q.jsx)(Y,{value:e.user.id,onClick:function(){e.getUser(e.user.id),D(!0)},onChange:z,className:A?"visible":""})]}),Object(q.jsx)(ee,{precio:e.price,className:A?"visible":"footer"}),Object(q.jsx)("div",{className:"contenedorFormulario",children:e.user.ultimoRegistro&&e.compararFecha(t,e.user.ultimoRegistro)&&A?Object(q.jsxs)(q.Fragment,{children:[Object(q.jsx)(X,{fecha:e.user.ultimoRegistro,nombre:e.user.nombre,hora:e.user.turno,precio:e.price}),Object(q.jsxs)("button",{className:"boton",onClick:function(){return e.contactMe(null,null,e.user.nombre)},children:["Contactar ",Object(q.jsx)("img",{width:"40px",src:p,alt:"Contacto por Whatsapp"})]})]}):Object(q.jsx)(q.Fragment,{children:Object(q.jsxs)("form",{className:"formularioReservas ".concat(!A&&"visible"),children:[Object(q.jsxs)("div",{className:"filaFormulario",children:[Object(q.jsx)("span",{children:"NOMBRE"}),Object(q.jsx)("input",{value:e.user.nombre,disabled:j,type:"text",name:"nombre",placeholder:"Ingrese su nombre",onChange:z,required:!0})]}),Object(q.jsxs)("div",{className:"filaFormulario",children:[Object(q.jsx)("span",{children:"CELULAR (con caracter\xedstica | sin 0, sin 15)"}),Object(q.jsx)("input",{value:e.user.telefono,disabled:j,type:"tel",name:"telefono",placeholder:"3492505050",onChange:z,required:!0})]}),Object(q.jsxs)("div",{className:"filaFormulario",children:[Object(q.jsx)("span",{children:"ELIGE EL D\xcdA"}),Object(q.jsx)(u.a,{onClick:function(){return E(!0)},onClose:function(){return E(!1)},open:w,InputProps:{readOnly:!0},disabled:j,name:"dia",autoOk:!0,className:I.inputFecha,minDate:n,shouldDisableDate:function(e){return 0===e.getDay()},format:"dd/MM/yyyy",value:o,InputAdornmentProps:{position:"start"},onChange:function(t){var n=new Date(t.toString().slice(4,15)).toLocaleString("es-AR",{dateStyle:"short"}).replaceAll("/","-");n=n.split("-")[0]+"-"+n.split("-")[1]+"-20"+n.split("-")[2],e.saveInfo("HANDLE_CHANGE",{nombre:"dia",data:n}),i(t)}})]}),Object(q.jsxs)("div",{className:"filaFormulario",children:[Object(q.jsx)("span",{children:"ELIGE EL HORARIO"}),Object(q.jsxs)("select",{disabled:j,className:"form-input select-filter",name:"turno",onChange:z,required:!0,children:[Object(q.jsx)("option",{children:"Elige el horario"}),0===e.freeHours.length?Object(q.jsx)("option",{children:"Cargando horas..."},"loading"):e.freeHours.map((function(e){return Object(q.jsx)("option",{name:e,children:e},e)}))]})]}),e.compararFecha(t,e.user.diaPromo)&&Object(q.jsx)(Z,{diaActual:e.user.dia,diaPromo:e.user.diaPromo,compararFecha:e.compararFecha,precio:e.price}),Object(q.jsx)("button",{disabled:j||C,className:"boton",type:"submit",onClick:function(t){t.preventDefault(),e.user.turno&&""!==e.user.turno&&"sin horario para hoy"!==e.user.turno&&"Elige el horario"!==e.user.turno?10===e.user.telefono.length?(f(!0),_&&b.a.put("/updateUser",e.user),e.user.newUser?b.a.post("/newUser",e.user).then((function(){return $()})).catch((function(){return console.log("fall\xf3 crear un nuevo usuario")})):$()):W("Revise su n\xfamero de whatsapp, debe tener 10 d\xedtigots"):W("Debes elegir un horario")},children:"Reservar"})]})})})]}):Object(q.jsx)(G,{}),Object(q.jsxs)(x.a,{show:R,onHide:function(){return M(!1)},children:[Object(q.jsx)(x.a.Header,{closeButton:!0,children:Object(q.jsx)(x.a.Title,{children:"Reservado!"})}),Object(q.jsx)(x.a.Body,{children:"Registramos tu reserva! Te esperamos el ".concat(e.user.dia," a las ").concat(e.user.turno)}),Object(q.jsx)(x.a.Footer,{children:Object(q.jsx)(m.a,{variant:"primary",onClick:function(){return M(!1)},children:"Ok"})})]})]})})),re=n(224);var ce=function(e){var t=(new Date).toLocaleString("es-AR",{dateStyle:"short"}).replaceAll("/","-"),n=Object(c.useState)([0,0,0,0,0,0,0,0,0,0,0,0]),r=Object(l.a)(n,2),a=r[0],o=r[1],i=Object(c.useState)([0,0,0,0,0,0]),s=Object(l.a)(i,2),u=s[0],d=s[1],j=Object(c.useState)(0),h=Object(l.a)(j,2),O=h[0],p=h[1];Object(c.useEffect)((function(){b.a.get("/statics").then((function(e){return o(e.data)})),b.a.get("/semana/".concat(t)).then((function(e){return d(e.data)})),b.a.get("/precio").then((function(e){return p(e.data.precio)}))}),[]);var x=["Ene","Feb","Mar","Abr","May","Jun","Jul","Ago","Sep","Oct","Nov","Dic"],g={elements:{point:{radius:0}},legend:{display:!1},maintainAspectRatio:!0,scales:{yAxes:[{gridLines:{drawBorder:!0,display:!1},ticks:{beginAtZero:!1,min:function(){for(var e=a[0],t=1;t<a.length;t++)e>a[t]&&(e=a[t]);return e-5<0?0:e-5}(),max:function(){for(var e=a[0],t=1;t<a.length;t++)e<a[t]&&(e=a[t]);return e+5}(),display:!1}}],xAxes:[{gridLines:{drawBorder:!0,display:!1}}]},tooltips:{xPadding:20,yPadding:10,displayColors:!1,bodyFontSize:16,bodyFontStyle:"bold",mode:"index",intersect:!1},hover:{mode:"index",intersect:!1}};return Object(q.jsxs)("div",{className:"graphic",children:[Object(q.jsx)("div",{className:"botones",children:Object(q.jsx)(m.a,{variant:"primary",onClick:function(){return e.history.push("/admin")},children:"Volver"})}),Object(q.jsx)("h1",{children:"Cantidad de clientes por mes"}),Object(q.jsx)("div",{className:"grafico",children:Object(q.jsx)(re.Line,{data:function(e){var t=e.getContext("2d").createLinearGradient(0,0,0,200);return t.addColorStop(0,"#FFBE00"),t.addColorStop(.8,"#FFBE00"),t.addColorStop(1,"#e3e3e3"),{labels:x,datasets:[{label:"Cantidad",data:a,stroke:"start",backgroundColor:t,borderColor:"#FFBE00",borderWidth:3}]}},height:"60%",width:"100%",options:g,plugins:[{id:"tooltipLine",afterDraw:function(e){if(e.tooltip._active&&e.tooltip._active.length){var t=e.ctx;t.save();var n=e.tooltip._active[0];t.beginPath(),t.moveTo(n.tooltipPosition().x,n.tooltipPosition().y),t.lineTo(n.tooltipPosition().x,e.chartArea.bottom),t.lineWidth="0.1em",t.strokeStyle="#333333",t.stroke(),t.restore()}}}]})}),Object(q.jsx)("br",{}),Object(q.jsx)("h1",{children:"Cantidad de clientes esta semana"}),u[0].dia?Object(q.jsxs)(f.a,{responsive:"sm",children:[Object(q.jsx)("thead",{children:Object(q.jsxs)("tr",{children:[Object(q.jsx)("th",{children:"Hoy"}),Object(q.jsx)("th",{children:"Ma\xf1ana"}),Object(q.jsx)("th",{children:u[2].dia}),Object(q.jsx)("th",{children:u[3].dia}),Object(q.jsx)("th",{children:u[4].dia}),Object(q.jsx)("th",{children:u[5].dia})]})}),Object(q.jsxs)("tbody",{children:[Object(q.jsx)("tr",{children:u.map((function(e){return Object(q.jsx)("td",{children:e.cantidad})}))}),Object(q.jsx)("tr",{children:u.map((function(e){return Object(q.jsxs)("td",{children:["$",e.cantidad*O]})}))})]})]}):Object(q.jsx)("div",{class:"d-flex justify-content-center loading",children:Object(q.jsx)("div",{class:"spinner-border",role:"status",children:Object(q.jsx)("span",{class:"visually-hidden",children:"Loading..."})})})]})},ae=(n(216),Object(v.b)((function(e){return{price:e.price}}),(function(e){return Object(C.b)(r,e)}))((function(e){var t=Object(c.useState)(3),n=Object(l.a)(t,2),r=n[0],a=n[1],o=Object(c.useState)(null),i=Object(l.a)(o,2),s=i[0],u=i[1],d=Object(c.useState)(!1),j=Object(l.a)(d,2),h=(j[0],j[1],Object(c.useState)(!1)),O=Object(l.a)(h,2);O[0],O[1];Object(c.useEffect)((function(){x(),e.getPrice()}),[]);var x=function(){var e=[];b.a.get("/promocion/".concat(r)).then((function(t){t.data.forEach((function(t){e.find((function(e){return console.log("el",e),console.log(t),e.idCliente===t.idCliente}))||e.push({idCliente:t.idCliente,dia:t.dia,nombre:t.nombre,diaPromo:t.diaPromo,telefono:t.telefono,value:!0})})),u(e)})).catch((function(e){return console.log(e)}))};console.log(s);return Object(q.jsxs)("div",{className:"promotion",children:[Object(q.jsxs)("div",{className:"botones",children:[Object(q.jsx)(m.a,{variant:"primary",onClick:function(){return e.history.push("/admin")},children:"Volver"}),Object(q.jsx)("span",{children:"Cantidad de d\xedas"}),Object(q.jsx)("input",{type:"number",value:r,onChange:function(e){return a(e.target.value)},className:"dias"}),Object(q.jsx)(m.a,{variant:"primary",onClick:x,children:"Buscar"})]}),Object(q.jsxs)(f.a,{responsive:"sm",children:[Object(q.jsx)("thead",{children:Object(q.jsxs)("tr",{children:[Object(q.jsx)("th",{children:"Nombre"}),Object(q.jsx)("th",{children:"Fecha"}),Object(q.jsx)("th",{children:"D\xeda Promoci\xf3n"}),Object(q.jsx)("th",{children:"Enviar"})]})}),Object(q.jsx)("tbody",{children:s&&s.map((function(t){return e.compararFecha(t.dia,t.diaPromo)&&Object(q.jsxs)("tr",{children:[Object(q.jsx)("td",{onClick:function(){return e.contactMe(t.telefono)},children:t.nombre}),Object(q.jsx)("td",{children:t.dia}),Object(q.jsx)("td",{children:t.diaPromo}),Object(q.jsx)("td",{children:Object(q.jsx)("img",{name:t.telefono,onClick:function(){return e.contactMe(t.telefono,(n=t.nombre,r=t.diaPromo,"*ARIEL LUQUE PELUQUERIA DE CABALLEROS INFORMA* Tienes disponible una promoci\xf3n para tu siguiente corte por un valor de $300. Reserva a trav\xe9s de nuestra sitio https://peluqueria-ariel.vercel.app/ antes del ".concat(r.replace("-","/").replace("-","/"),". Te espero ").concat(n,"!")));var n,r},className:"imagenWsp",src:p,alt:"boton de whatsapp"})})]},t.idCliente)}))})]})]})}))),oe=n(34),ie=n(461);var se=Object(v.b)(null,(function(e){return Object(C.b)(r,e)}))((function(e){var t=Object(c.useState)([]),n=Object(l.a)(t,2),r=n[0],a=n[1],o=Object(c.useState)(""),i=Object(l.a)(o,2),s=i[0],u=i[1],d=function(e){var t=e.split("-")[0],n=e.split("-")[1]-1,r=e.split("-")[2];return r<2e3&&(r="20"+r),new Date(r,n,t)},j=function(e,t){a((function(n){return[].concat(Object(oe.a)(n),[n[t-1][e.target.name]=e.target.value])}))};return console.log(r),Object(c.useEffect)((function(){b.a.get("/allClients").then((function(e){var t=e.data.sort((function(e,t){return function(e,t){return d(e)>d(t)?-1:d(e)<d(t)?1:0}(e.dia,t.dia)}));a(t)}))}),[]),Object(q.jsxs)("div",{className:"promotion mt-1",children:[Object(q.jsxs)("div",{className:"botones",children:[Object(q.jsx)(ie.a.Control,{value:s,onChange:function(e){return function(e){u(e)}(e.target.value)},type:"text",placeholder:"Buscar..."}),Object(q.jsx)(m.a,{variant:"primary",onClick:function(){return e.history.push("/admin")},children:"Volver"})]}),Object(q.jsxs)(f.a,{striped:!0,bordered:!0,hover:!0,children:[Object(q.jsx)("thead",{children:Object(q.jsxs)("tr",{children:[Object(q.jsx)("th",{children:"Nombre"}),Object(q.jsx)("th",{children:"Dia Promo"}),Object(q.jsx)("th",{children:"Dia Turno"}),Object(q.jsx)("th",{children:"Turno"}),Object(q.jsx)("th",{children:"DNI"}),Object(q.jsx)("th",{children:"Tiene Promo"}),Object(q.jsx)("th",{children:"Actualizar"})]})}),Object(q.jsx)("tbody",{children:s.length>=3?r.map((function(t,n){if((t.nombre?t.nombre.toLowerCase():"").includes(s.toLowerCase()))return Object(q.jsxs)("tr",{onClick:function(){return e.contactMe(t.telefono)},children:[console.log(t),Object(q.jsx)("input",{name:"nombre",onChange:function(e){return j(e,n)},children:t.nombre}),Object(q.jsx)("input",{name:"diaPromo",onChange:function(e){return j(e,n)},children:t.diaPromo}),Object(q.jsx)("input",{name:"dia",onChange:function(e){return j(e,n)},children:t.dia}),Object(q.jsx)("input",{name:"turno",onChange:function(e){return j(e,n)},children:t.turno}),Object(q.jsx)("input",{name:"idCliente",onChange:function(e){return j(e,n)},children:t.idCliente}),Object(q.jsx)("input",{name:"tienePromo",onChange:function(e){return j(e,n)},children:t.tienePromo?"Si":"No"}),Object(q.jsx)(m.a,{onClick:function(){return t.id,void b.a.put("/updateClient",r)},children:"Actualizar"})]},t.id)})):Object(q.jsx)("tr",{})})]})]})}));var le=function(){return Object(q.jsxs)(q.Fragment,{children:[Object(q.jsx)(s.a,{path:"/",component:ne,exact:!0}),Object(q.jsx)(s.a,{path:"/admin",component:V,exact:!0}),Object(q.jsx)(s.a,{path:"/statistics",component:ce,exact:!0}),Object(q.jsx)(s.a,{path:"/promotions",component:ae,exact:!0}),Object(q.jsx)(s.a,{path:"/search",component:se,exact:!0})]})},ue=(n(416),n(24)),de=n(227),je=n(228),be=n(158),he=n(225),Oe=n.n(he),pe=n(14),me=(new Date).toLocaleString("es-AR",{dateStyle:"short"}).replaceAll("/","-"),fe={freeHours:["sin horario para hoy"],wspMessage:"",user:{id:"",nombre:"",telefono:"",tienePromo:!1,newUser:!1,dia:me=me.split("-")[0]+"-"+me.split("-")[1]+"-20"+me.split("-")[2],turno:""},price:0};var xe=function(){var e,t=arguments.length>0&&void 0!==arguments[0]?arguments[0]:fe,n=arguments.length>1?arguments[1]:void 0,r=n.type,c=n.payload;switch(r){case S:var a=c.filter((function(e){return Number(e.split(":")[0])===(new Date).getHours()?Number(e.split(":")[1])>=(new Date).getMinutes():Number(e.split(":")[0])>(new Date).getHours()}));return e=0===a.length?["sin horario para hoy"]:a,Object(K.a)(Object(K.a)({},t),{},{freeHours:e});case y:return e=0===c.length?["sin horario para hoy"]:c,Object(K.a)(Object(K.a)({},t),{},{freeHours:e});case N:case w:return Object(K.a)(Object(K.a)({},t),{},{wspMessage:c});case E:var o=Object(K.a)(Object(K.a)({},t.user),{},{nombre:c.nombre,telefono:c.telefono,tienePromo:c.tienePromo,diaPromo:c.diaPromo,ultimoRegistro:c.ultimoRegistro,turno:c.turno});return o.nombre||(o.newUser=!0),Object(K.a)(Object(K.a)({},t),{},{user:o,logeado:!0});case F:return Object(K.a)(Object(K.a)({},t),{},{user:Object(K.a)(Object(K.a)({},t.user),{},Object(pe.a)({},c.nombre,c.data))});case k:return Object(K.a)(Object(K.a)({},t),{},{price:c});default:return t}},ge=n(226),ve=Object(C.c)(xe,Object(C.a)(ge.a));Oe.a.config(),b.a.defaults.baseURL=Object({NODE_ENV:"production",PUBLIC_URL:".",WDS_SOCKET_HOST:void 0,WDS_SOCKET_PATH:void 0,WDS_SOCKET_PORT:void 0,FAST_REFRESH:!0}).REACT_APP_API||"http://66.97.34.27:3001",i.a.render(Object(q.jsx)(a.a.StrictMode,{children:Object(q.jsx)(be.a,{children:Object(q.jsx)(v.a,{store:ve,children:Object(q.jsx)(h.a,{maxSnack:1,children:Object(q.jsx)(ue.a,{utils:de.a,locale:je.a,children:Object(q.jsx)(le,{})})})})})}),document.getElementById("root"))}},[[420,1,2]]]);
//# sourceMappingURL=main.b08c0b99.chunk.js.map